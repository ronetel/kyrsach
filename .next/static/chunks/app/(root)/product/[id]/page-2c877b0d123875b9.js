(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2730],{36895:(e,t,a)=>{Promise.resolve().then(a.bind(a,68300))},42390:(e,t,a)=>{"use strict";a.d(t,{j:()=>N});var r={};a.r(r),a.d(r,{addCartItem:()=>x,getCart:()=>c,removeCartItem:()=>m,updateItemQuantity:()=>u});var s={};a.r(s),a.d(s,{getMe:()=>p});var i={};a.r(i),a.d(i,{search:()=>v});var n={};a.r(n),a.d(n,{addProduct:()=>I,deleteProduct:()=>j,getCategories:()=>h,getOrders:()=>y,getProducts:()=>f,getSizes:()=>b,updateOrderStatus:()=>w});var d=a(23464),l=a(87358);let o=d.A.create({baseURL:l.env.NEXT_PUBLIC_API_URL}),c=async()=>(await o.get("/api/carts")).data,u=async(e,t)=>(await o.patch("/api/carts/"+e,{quantity:t})).data,m=async e=>(await o.delete("/api/carts/"+e)).data,x=async e=>(await o.post("/api/carts",e)).data,p=async()=>{let{data:e}=await o.get("api/auth/me");return e};var g=function(e){return e.SEARCH_PRODUCTS="api/products/search",e}({});let v=async e=>(await o.get(g.SEARCH_PRODUCTS,{params:{query:e}})).data,h=async()=>(await o.get("/api/categories")).data,b=async()=>(await o.get("/api/sizes")).data,f=async()=>(await o.get("/api/products")).data,y=async()=>(await o.get("/api/orders")).data,w=async(e,t)=>(await o.patch("/api/admin/orders/".concat(e,"/status"),t)).data,j=async e=>{await o.delete("/api/products/".concat(e))},I=async e=>(await o.post("/api/products",e)).data,N={cart:r,auth:s,products:i,admin:n}},46457:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var r=a(52596),s=a(39688);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},59877:(e,t,a)=>{"use strict";a.d(t,{y:()=>i});var r=a(52596),s=a(12115);let i=e=>{let{text:t,size:a="sm",className:i}=e;return s.createElement({xs:"h5",sm:"h4",md:"h3",lg:"h2",xl:"h1","2xl":"h1"}[a],{className:(0,r.A)({xs:"text-[16px]",sm:"text-[22px]",md:"text-[26px]",lg:"text-[32px]",xl:"text-[40px]","2xl":"text-[48px]"}[a],i)},t)}},60714:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var r=a(95155),s=a(12115),i=a(99708),n=a(74466),d=a(46457);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-dop-bg text-black shadow-xs hover:bg-dop-bg/90 rounded-2xl",red:"bg-mint-500 shadow-xs hover:bg-mint-500/90 rounded-3xl",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:o=!1,loading:c,children:u,...m}=e,x=o?i.DX:"button";return(0,r.jsx)(x,{"data-slot":"button",className:(0,d.cn)(l({variant:s,size:n,className:a}),c&&"opacity-75 pointer-events-none"),disabled:!!c,"aria-busy":!!c,ref:t,...m,children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),u]}):u})});o.displayName="Button"},66325:(e,t,a)=>{"use strict";a.d(t,{x:()=>n});var r=a(65453),s=a(42390);let i=e=>({items:e.items.map(e=>{var t;return{id:e.id,quantity:e.quantity,name:e.productItem.Product.name,imageUrl:e.productItem.Product.imageUrl,price:e.productItem.Price,pizzaSize:(null==(t=e.productItem.Size)?void 0:t.Size_name)||null,disabled:!1}}),totalAmount:e.totalAmount}),n=(0,r.v)((e,t)=>({items:[],error:!1,loading:!0,totalAmount:0,fetchCartItems:async()=>{try{e({loading:!0,error:!1});let t=await s.j.cart.getCart();e(i(t))}catch(t){console.error(t),e({error:!0})}finally{e({loading:!1})}},updateItemQuantity:async(a,r)=>{try{e({loading:!0,error:!1});let n=await s.j.cart.updateItemQuantity(a,r);if(!n)return void await t().fetchCartItems();e(i(n))}catch(a){console.error("Update quantity error:",a),e({error:!0}),setTimeout(()=>t().fetchCartItems(),1e3)}finally{e({loading:!1})}},removeCartItem:async t=>{try{e(e=>({loading:!0,error:!1,items:e.items.map(e=>e.id===t?{...e,disabled:!0}:e)}));let a=await s.j.cart.removeCartItem(t);e(i(a))}catch(t){console.error(t),e({error:!0})}finally{e(e=>({loading:!1,items:e.items.map(e=>({...e,disabled:!1}))}))}},addCartItem:async t=>{try{e({loading:!0,error:!1});let a=await s.j.cart.addCartItem(t);e(i(a))}catch(t){console.error(t),e({error:!0})}finally{e({loading:!1})}}}))},68300:(e,t,a)=>{"use strict";a.d(t,{ProductForm:()=>x});var r=a(95155),s=a(12115),i=a(13568),n=a(46457),d=a(60714);let l=e=>{let{imageUrl:t,size:a,className:s}=e;return(0,r.jsxs)("div",{className:(0,n.cn)("flex items-center justify-center flex-1 relative w-full",s),children:[(0,r.jsx)("img",{src:t,alt:"Logo",className:(0,n.cn)("relative left-2 top-2 transition-all z-10 duration-300",{"w-[250px] h-[250px]":(null==a?void 0:a.Size_name)==="25","w-[300px] h-[300px]":(null==a?void 0:a.Size_name)==="30","w-[350px] h-[350px]":(null==a?void 0:a.Size_name)==="35"})}),(0,r.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 border-dashed border-2 rounded-full border-gray-300 w-[320px] h-[320px]"}),(0,r.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 border-dotted border-2 rounded-full border-gray-200 w-[270px] h-[270px]"})]})};var o=a(59877);let c=e=>{var t;let{name:a,items:i,desc:c,imageUrl:u,className:m,loading:x,onSubmit:p}=e,[g,v]=s.useState(null==(t=i[0])?void 0:t.Id),h=i.find(e=>e.Id===g)||i[0],b=async()=>{h&&p(h.Id)};return(0,r.jsxs)("div",{className:(0,n.cn)(m,"flex flex-col md:flex-row bg-dop-bg min-h-[500px] max-h-[700px]"),children:[(0,r.jsx)("div",{className:"md:w-2/4 bg-dop-bg flex items-center justify-center p-4",children:(0,r.jsx)(l,{imageUrl:u,size:h.Size,className:"w-full h-full max-h-[400px] md:max-h-none"})}),(0,r.jsxs)("div",{className:"md:w-2/4 bg-main p-6 flex flex-col h-full overflow-y-auto",children:[(0,r.jsx)(o.y,{text:a,size:"lg",className:"font-extrabold mb-3 "}),(0,r.jsx)("p",{className:"text-dop-bg mb-6 text-lg",children:c}),(0,r.jsx)("div",{className:(0,n.cn)(m,"flex justify-between bg-mint-500 rounded-3xl p-1 select-none"),children:i.map(e=>{var t;return(0,r.jsxs)("button",{onClick:()=>null==v?void 0:v(e.Id),className:(0,n.cn)("flex items-center justify-center cursor-pointer h-[30px] px-5 flex-1 rounded-3xl transition-all duration-400 text-sm",g===e.Id?"bg-main border-dop-bg":"bg-mint-500 border-dop-bg"),children:[null==(t=e.Size)?void 0:t.Size_name," см"]},e.Id)})}),(0,r.jsx)("div",{className:"mt-auto pt-4",children:(0,r.jsxs)(d.$,{className:"w-full h-14 text-md rounded-lg",size:"lg",onClick:b,children:["Добавить в корзину за ",h.Price," ₽"]})})]})]})},u=e=>{let{name:t,desc:a,imageUrl:s,price:i,onSubmit:l,className:c,loading:u}=e;return(0,r.jsxs)("div",{className:(0,n.cn)(c,"flex flex-1"),children:[(0,r.jsx)("div",{className:"flex items-center justify-center bg-dop-bg flex-1 relative 'min-h-[500px] max-h-[700px]'",children:(0,r.jsx)("img",{src:s,alt:t,className:"relative left-2 top-2 transition-all z-10 duration-300 w-[350px] h-[350px]"})}),(0,r.jsxs)("div",{className:"w-[490px] bg-main p-7",children:[(0,r.jsx)(o.y,{text:t,size:"md",className:"font-extrabold mb-1"}),(0,r.jsx)("p",{className:"text-dop-bg mb-6 text-mb",children:a}),(0,r.jsxs)(d.$,{onClick:()=>null==l?void 0:l(),disabled:u,className:"h-[55px] px-10 text-base rounded-[18px] w-full mt-10",children:["Добавить в корзину за ",i," ₽"]})]})]})};var m=a(66325);let x=e=>{let{product:t,onSubmit:a}=e,n=(0,m.x)(e=>e.addCartItem),d=(0,m.x)(e=>e.loading),l=t.ProductItems[0],o=!!(null==l?void 0:l.Size),x=(0,s.useCallback)(async(e,r)=>{try{let r=null!=e?e:l.Id;await n({productItemId:r}),i.Ay.success("".concat(t.name," добавлен(а) в корзину")),null==a||a()}catch(e){i.Ay.error("Не удалось добавить товар в корзину"),console.error(e)}},[n,null==l?void 0:l.Id,t.name,a]);return o?(0,r.jsx)(c,{imageUrl:t.imageUrl||"",name:t.name,desc:t.description||"",items:t.ProductItems,onSubmit:x}):(0,r.jsx)(u,{imageUrl:t.imageUrl||"",name:t.name,desc:t.description||"",onSubmit:x,price:l.Price,loading:d})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,3568,5604,8441,1684,7358],()=>t(36895)),_N_E=e.O()}]);